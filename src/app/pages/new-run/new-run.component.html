<div class="container">

  <div class="card bg-dark text-white">
    <div class="card-body">
      <h1 class="card-title">Choose Your Character</h1>

      <div class="row">
        <div class="col-6">
          <div class="sprite-container">
            @for(character of characterList; track $index) {
            <div class="sprite" (click)="selectPlayerCharacter(character)"
              [class.selected]="playerCharacterId === character.id" aria-hidden="true">
              <sw-sprite [spritable]="character" [size]="128"></sw-sprite>
            </div>
            }
          </div>
        </div>

        <div class="col-6">

          @if(character) {
          <div class="character">
            <div class="row">
              <div class="col-12 name">{{ character.name }}</div>
              <div class="col-12 health">{{ character.maxHealth }} HP</div>
              <div class="col-12 description">{{ character.description }}</div>
            </div>

            <div class="row mt-3">
              <div class="col-12 subheader">Relics</div>
            </div>

            <div class="row mt-3">
              <div class="col-12 cards">
                <div class="relic-row">
                  @for(relic of relics; track $index) {
                  @if(relic) {
                  <div class="relic-container me-3 mb-3">
                    <sw-relic-indicator [relic]="relic" [stacks]="1"></sw-relic-indicator>
                  </div>
                  }
                  }
                </div>
              </div>
            </div>

            <div class="row mt-3">
              <div class="col-12 subheader">Spells</div>
            </div>

            <div class="row mt-3">

              <div class="col-12 cards">
                <div class="spell-row">
                  @for(spellId of character.deck.spells; track $index) {
                  <div class="spell-container me-3 mb-3">
                    @if(getSpellById(spellId); as spell) {
                    <sw-sprite [spritable]="spell"></sw-sprite>
                    }
                  </div>
                  }
                </div>
              </div>
            </div>
          </div>
          }
        </div>
      </div>

      <div class="row mt-3 action-row">
        <div class="col-6">
          <div class="d-grid gap-2">
            <button class="btn btn-light" [routerLink]="['/home']">Back</button>
          </div>
        </div>

        <div class="col-6">
          <div class="d-grid gap-2">
            <button class="btn btn-primary" (click)="startRealRun()" [disabled]="!playerCharacterId">Start Run</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>